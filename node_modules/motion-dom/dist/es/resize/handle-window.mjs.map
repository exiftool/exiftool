{"version":3,"file":"handle-window.mjs","sources":["../../../src/resize/handle-window.ts"],"sourcesContent":["import { WindowResizeHandler } from \"./types\"\n\nconst windowCallbacks = new Set<WindowResizeHandler>()\n\nlet windowResizeHandler: VoidFunction | undefined\n\nfunction createWindowResizeHandler() {\n    windowResizeHandler = () => {\n        const info = {\n            get width() {\n                return window.innerWidth\n            },\n            get height() {\n                return window.innerHeight\n            },\n        }\n\n        windowCallbacks.forEach((callback) => callback(info))\n    }\n\n    window.addEventListener(\"resize\", windowResizeHandler)\n}\n\nexport function resizeWindow(callback: WindowResizeHandler) {\n    windowCallbacks.add(callback)\n\n    if (!windowResizeHandler) createWindowResizeHandler()\n\n    return () => {\n        windowCallbacks.delete(callback)\n\n        if (\n            !windowCallbacks.size &&\n            typeof windowResizeHandler === \"function\"\n        ) {\n            window.removeEventListener(\"resize\", windowResizeHandler)\n            windowResizeHandler = undefined\n        }\n    }\n}\n"],"names":[],"mappings":"AAEA,MAAM,eAAe,GAAG,IAAI,GAAG,EAAuB,CAAA;AAEtD,IAAI,mBAA6C,CAAA;AAEjD,SAAS,yBAAyB,GAAA;IAC9B,mBAAmB,GAAG,MAAK;AACvB,QAAA,MAAM,IAAI,GAAG;AACT,YAAA,IAAI,KAAK,GAAA;gBACL,OAAO,MAAM,CAAC,UAAU,CAAA;aAC3B;AACD,YAAA,IAAI,MAAM,GAAA;gBACN,OAAO,MAAM,CAAC,WAAW,CAAA;aAC5B;SACJ,CAAA;AAED,QAAA,eAAe,CAAC,OAAO,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;AACzD,KAAC,CAAA;AAED,IAAA,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAA;AAC1D,CAAC;AAEK,SAAU,YAAY,CAAC,QAA6B,EAAA;AACtD,IAAA,eAAe,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;AAE7B,IAAA,IAAI,CAAC,mBAAmB;AAAE,QAAA,yBAAyB,EAAE,CAAA;AAErD,IAAA,OAAO,MAAK;AACR,QAAA,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;QAEhC,IACI,CAAC,eAAe,CAAC,IAAI;AACrB,YAAA,OAAO,mBAAmB,KAAK,UAAU,EAC3C;AACE,YAAA,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAA;YACzD,mBAAmB,GAAG,SAAS,CAAA;SAClC;AACL,KAAC,CAAA;AACL;;;;"}