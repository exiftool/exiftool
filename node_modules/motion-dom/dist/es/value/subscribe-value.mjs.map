{"version":3,"file":"subscribe-value.mjs","sources":["../../../src/value/subscribe-value.ts"],"sourcesContent":["import { MotionValue } from \".\"\nimport { cancelFrame, frame } from \"../frameloop\"\n\nexport function subscribeValue<O>(\n    inputValues: MotionValue[],\n    outputValue: MotionValue<O>,\n    getLatest: () => O\n) {\n    const update = () => outputValue.set(getLatest())\n    const scheduleUpdate = () => frame.preRender(update, false, true)\n\n    const subscriptions = inputValues.map((v) => v.on(\"change\", scheduleUpdate))\n\n    outputValue.on(\"destroy\", () => {\n        subscriptions.forEach((unsubscribe) => unsubscribe())\n        cancelFrame(update)\n    })\n}\n"],"names":[],"mappings":";;SAGgB,cAAc,CAC1B,WAA0B,EAC1B,WAA2B,EAC3B,SAAkB,EAAA;AAElB,IAAA,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAA;AACjD,IAAA,MAAM,cAAc,GAAG,MAAM,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAA;IAEjE,MAAM,aAAa,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC,CAAA;AAE5E,IAAA,WAAW,CAAC,EAAE,CAAC,SAAS,EAAE,MAAK;QAC3B,aAAa,CAAC,OAAO,CAAC,CAAC,WAAW,KAAK,WAAW,EAAE,CAAC,CAAA;QACrD,WAAW,CAAC,MAAM,CAAC,CAAA;AACvB,KAAC,CAAC,CAAA;AACN;;;;"}