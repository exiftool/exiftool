{"version":3,"file":"stagger.mjs","sources":["../../../src/utils/stagger.ts"],"sourcesContent":["import { Easing, easingDefinitionToFunction } from \"motion-utils\"\nimport { DynamicOption } from \"../animation/types\"\n\nexport type StaggerOrigin = \"first\" | \"last\" | \"center\" | number\n\nexport type StaggerOptions = {\n    startDelay?: number\n    from?: StaggerOrigin\n    ease?: Easing\n}\n\nexport function getOriginIndex(from: StaggerOrigin, total: number) {\n    if (from === \"first\") {\n        return 0\n    } else {\n        const lastIndex = total - 1\n        return from === \"last\" ? lastIndex : lastIndex / 2\n    }\n}\n\nexport function stagger(\n    duration: number = 0.1,\n    { startDelay = 0, from = 0, ease }: StaggerOptions = {}\n): DynamicOption<number> {\n    return (i: number, total: number) => {\n        const fromIndex =\n            typeof from === \"number\" ? from : getOriginIndex(from, total)\n        const distance = Math.abs(fromIndex - i)\n        let delay = duration * distance\n\n        if (ease) {\n            const maxDelay = total * duration\n            const easingFunction = easingDefinitionToFunction(ease)\n            delay = easingFunction(delay / maxDelay) * maxDelay\n        }\n\n        return startDelay + delay\n    }\n}\n"],"names":[],"mappings":";;AAWgB,SAAA,cAAc,CAAC,IAAmB,EAAE,KAAa,EAAA;AAC7D,IAAA,IAAI,IAAI,KAAK,OAAO,EAAE;AAClB,QAAA,OAAO,CAAC,CAAA;KACX;SAAM;AACH,QAAA,MAAM,SAAS,GAAG,KAAK,GAAG,CAAC,CAAA;AAC3B,QAAA,OAAO,IAAI,KAAK,MAAM,GAAG,SAAS,GAAG,SAAS,GAAG,CAAC,CAAA;KACrD;AACL,CAAC;SAEe,OAAO,CACnB,QAAmB,GAAA,GAAG,EACtB,EAAE,UAAU,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,KAAqB,EAAE,EAAA;AAEvD,IAAA,OAAO,CAAC,CAAS,EAAE,KAAa,KAAI;AAChC,QAAA,MAAM,SAAS,GACX,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,cAAc,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;QACjE,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC,CAAA;AACxC,QAAA,IAAI,KAAK,GAAG,QAAQ,GAAG,QAAQ,CAAA;QAE/B,IAAI,IAAI,EAAE;AACN,YAAA,MAAM,QAAQ,GAAG,KAAK,GAAG,QAAQ,CAAA;AACjC,YAAA,MAAM,cAAc,GAAG,0BAA0B,CAAC,IAAI,CAAC,CAAA;YACvD,KAAK,GAAG,cAAc,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,QAAQ,CAAA;SACtD;QAED,OAAO,UAAU,GAAG,KAAK,CAAA;AAC7B,KAAC,CAAA;AACL;;;;"}