{"version":3,"file":"flat-tree.mjs","sources":["../../../../src/projection/utils/flat-tree.ts"],"sourcesContent":["import { addUniqueItem, removeItem } from \"motion-utils\"\nimport { compareByDepth, WithDepth } from \"./compare-by-depth\"\n\nexport class FlatTree {\n    private children: WithDepth[] = []\n\n    private isDirty: boolean = false\n\n    add(child: WithDepth) {\n        addUniqueItem(this.children, child)\n        this.isDirty = true\n    }\n\n    remove(child: WithDepth) {\n        removeItem(this.children, child)\n        this.isDirty = true\n    }\n\n    forEach(callback: (child: WithDepth) => void) {\n        this.isDirty && this.children.sort(compareByDepth)\n        this.isDirty = false\n        this.children.forEach(callback)\n    }\n}\n"],"names":[],"mappings":";;;MAGa,QAAQ,CAAA;AAArB,IAAA,WAAA,GAAA;QACY,IAAQ,CAAA,QAAA,GAAgB,EAAE,CAAA;QAE1B,IAAO,CAAA,OAAA,GAAY,KAAK,CAAA;KAiBnC;AAfG,IAAA,GAAG,CAAC,KAAgB,EAAA;AAChB,QAAA,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;AACnC,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;KACtB;AAED,IAAA,MAAM,CAAC,KAAgB,EAAA;AACnB,QAAA,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;AAChC,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;KACtB;AAED,IAAA,OAAO,CAAC,QAAoC,EAAA;QACxC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;AAClD,QAAA,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;AACpB,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;KAClC;AACJ;;;;"}